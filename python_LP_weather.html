{% extends "weatherApp_base.html" %}
{% load static %}

{% block content %}
{% include "sidePanel.html" %}
    <div class="weather_page_container">
        <div class='weather_title'>
            <br><h3>WEATHER FORECAST</h3>
        </div>   

        <div class="weather_flex-card">
            <div class="weather_search">
                <form method="POST">
                    {% csrf_token %}
                    <div>
                        <div>
                            <input class="weather_input" type="text" placeholder="City Name / Zip Code" name="City_Name" required>
                            {% csrf_token %}
                        </div>
                        <button type="submit" class="weather_btn">Search Location</button><br><br>
                    </div>
                </form>
            </div>

            <div class="weather_current">
                <h3>{{ location.city }}, {{ location.state }}, {{ location.country }}</h3>

                <!--If alerts exist, make a button that links to a modal with the alert info-->
                {% if alerts %}
                <br>
                    <!-- Button trigger modal -->
                    <button type="button" class="btn btn-danger" align="right" data-toggle="modal" data-target="#alertModal">
                        <strong>Alerts:</strong> {{ alerts.alert }}
                    </button>
                <br>
                <br>      
                    <!-- Modal -->
                    <div class="modal fade" id="alertModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header bg-danger">
                                    <h5 class="modal-title" id="exampleModalLabel">{{ alerts.alert }}</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    {{ alerts.alert_desc }}
                                </div>
                                <div class="modal-footer bg-danger">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endif %}

                <h5>{{ weekdays.0 }}</h5><br>
                <img src="{{ iconPaths.0 }}" alt="Image" align="left" ><br>
                <span><strong>Temperature:</strong> {{ weather.current_temp }}° F</span><br>
                <span><strong>Chance Of Precipitation:</strong> {{ weather.current_precip }}%</span><br>
                <span><strong>Summary:</strong> {{ weather.current_description }}</span>
              </div>
        </div>
            
        <div class="weather_flex-card_5day">
            <div class="weather_5day">
                <h4 class="weather_h4">{{ weekdays.1 }}</h4>
                <img class="weather_img" src="{{ iconPaths.1 }}" alt="Image"><br>
                <span><strong>High:</strong> {{ weather.day1_temp_high }}° F</span><br>
                <span><strong>Low:</strong> {{ weather.day1_temp_low }}° F</span><br>
                <span><strong>Chance Of Precipitation:</strong> {{ weather.day1_precip }}%</span><br>
                <span><strong>Summary:</strong><br>{{ weather.day1_description }}</span>
            </div>
            <div class="weather_5day">
                <h4 class="weather_h4">{{ weekdays.2 }}</h4>
                <img class="weather_img" src="{{ iconPaths.2 }}" alt="Image"><br>
                <span><strong>High:</strong> {{ weather.day2_temp_high }}° F</span><br>
                <span><strong>Low:</strong> {{ weather.day2_temp_low }}° F</span><br>
                <span><strong>Chance Of Precipitation:</strong> {{ weather.day2_precip }}%</span><br>
                <span><strong>Summary:</strong><br>{{ weather.day2_description }}</span>
            </div>
            <div class="weather_5day">
                <h4 class="weather_h4">{{ weekdays.3 }}</h4>
                <img class="weather_img" src="{{ iconPaths.3 }}" alt="Image"><br>
                <span><strong>High:</strong> {{ weather.day3_temp_high }}° F</span><br>
                <span><strong>Low:</strong> {{ weather.day3_temp_low }}° F</span><br>
                <span><strong>Chance Of Precipitation:</strong> {{ weather.day3_precip }}%</span><br>
                <span><strong>Summary:</strong><br>{{ weather.day3_description }}</span>
            </div>
            <div class="weather_5day">
                <h4 class="weather_h4">{{ weekdays.4 }}</h4>
                <img class="weather_img" src="{{ iconPaths.4 }}" alt="Image"><br>
                <span><strong>High:</strong> {{ weather.day4_temp_high }}° F</span><br>
                <span><strong>Low:</strong> {{ weather.day4_temp_low }}° F</span><br>
                <span><strong>Chance Of Precipitation:</strong> {{ weather.day4_precip }}%</span><br>
                <span><strong>Summary:</strong><br>{{ weather.day4_description }}</span>
            </div>
            <div class="weather_5day">
                <h4 class="weather_h4">{{ weekdays.5 }}</h4>
                <img class="weather_img" src="{{ iconPaths.5 }}" alt="Image"><br>
                <span><strong>High:</strong> {{ weather.day5_temp_high }}° F</span><br>
                <span><strong>Low:</strong> {{ weather.day5_temp_low }}° F</span><br>
                <span><strong>Chance Of Precipitation:</strong> {{ weather.day5_precip }}%</span><br>
                <span><strong>Summary:</strong><br>{{ weather.day5_description }}</span>
            </div>
        </div>   
    </div>


{% endblock %}